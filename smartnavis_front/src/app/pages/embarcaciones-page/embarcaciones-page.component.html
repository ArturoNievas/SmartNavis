<app-app-page
  titulo="Embarcaciones"
  subtitulo="Lista de embarcaciones disponibles para publicar"
>
  <div class="global-container embarcaciones-page-container">
    <article>
      <ol *ngIf="embarcaciones.length; else sinPublicaciones" class="p-0 m-0">
        <div>
          <li *ngFor="let embarcacion of embarcaciones">
            <div>
              <span>
                <b>{{ embarcacion.nombre }}</b>
                ({{ embarcacion.matricula }})
              </span>
              <button
                class="btn btn-primary"
                (click)="abrirFormularioDePublicacion(embarcacion)"
              >
                Publicar
              </button>
            </div>
          </li>
        </div>
      </ol>

      <ng-template #sinPublicaciones>
        <div *ngIf="!embarcaciones.length">
          <p class="alert alert-secondary">No hay embarcaciones disponibles.</p>
        </div>
      </ng-template>
    </article>

    <aside>
      <div
        *ngIf="mensajeFormulario"
        [class.alert-danger]="mensajeFormulario.tipo === 'error'"
        [class.alert-primary]="mensajeFormulario.tipo === 'exito'"
        class="alert"
      >
        {{ mensajeFormulario.mensaje }}
      </div>

      <div *ngIf="embarcacionSeleccionada" class="card">
        <form class="card-body">
          <h3 class="mb-4">
            <b>{{ embarcacionSeleccionada.nombre }}</b>
            ({{ embarcacionSeleccionada.matricula }})
          </h3>

          <div class="form-group mb-2">
            <label class="form-label">Título de la publicación</label>
            <input
              for="titulo"
              id="titulo"
              class="form-control"
              placeholder="Permuto {{ embarcacionSeleccionada.nombre }}"
              [(ngModel)]="nuevaPublicacion.titulo"
              name="titulo"
            />
          </div>

          <div class="form-group mb-4">
            <label for="descripcion" class="form-label">
              Descripción de la publicación
            </label>

            <textarea
              id="descripcion"
              class="form-control"
              placeholder="Descripción de la publicación"
              [(ngModel)]="nuevaPublicacion.descripcion"
              name="descripcion"
            ></textarea>
          </div>

          <div class="form-group">
            <button
              type="submit"
              class="btn btn-primary mx-2"
              [disabled]="!nuevaPublicacionEsValida()"
              (click)="publicarEmbarcacion()"
            >
              Publicar embarcación
            </button>

            <button
              class="btn btn-secondary mx-2"
              (click)="cerrarFormularioDePublicacion()"
            >
              Cancelar
            </button>
          </div>
        </form>
      </div>
    </aside>
  </div>
</app-app-page>
